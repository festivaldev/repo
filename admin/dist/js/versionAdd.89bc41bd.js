(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["versionAdd"],{dfbb:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3"},[e("Nav")],1),e("div",{staticClass:"col-md-9"},[t.packageData&&t.packageData.status?t._e():e("div",[e("div",{staticClass:"dashhead mb-3"},[e("div",{staticClass:"dashhead-titles"},[e("h6",{staticClass:"dashhead-subtitle"},[t._v(t._s(t.packageData.name)+" – Versions")]),e("h2",{staticClass:"dashhead-title"},[t._v("New Version")])])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-6 text-left"},[e("button",{staticClass:"btn btn-danger",attrs:{disabled:!t.$v.$anyDirty},on:{click:function(a){t.cancel()}}},[e("span",{staticClass:"icon icon-squared-cross"}),t._v("\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t")])]),e("div",{staticClass:"col-6 row p-0 justify-content-end text-right"},[t.isDoingWork?e("div",{staticClass:"col p-0 pr-3"},[e("div",{staticClass:"loading-indicator"})]):t._e(),e("div",{staticClass:"col-auto p-0"},[e("button",{staticClass:"btn btn-primary",attrs:{disabled:t.$v.$invalid||!t.$v.$anyDirty},on:{click:function(a){t.saveVersion()}}},[e("span",{staticClass:"icon icon-save"}),t._v("\n\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t")])])])])]),t.packageData&&404==t.packageData.status?e("div",[e("vue-headful",{attrs:{title:"Package not found – FESTIVAL Pack'd"}}),e("h4",[t._v("Package not found")]),e("p",[t._v('Could not retrieve info for package "'+t._s(t.$route.params.packageId)+'"')])],1):t._e(),t.packageData&&!t.packageData.status?e("div",[e("vue-headful",{attrs:{title:"Add Version – FESTIVAL Pack'd"}}),e("form",{attrs:{name:"addVersionForm",novalidate:""}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6 form-group"},[e("h4",{staticClass:"my-4"},[t._v("Version Info")]),e("label",[t._v("Version Number")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.versionData.version,expression:"versionData.version"}],staticClass:"form-control",attrs:{type:"text",placeholder:"1.0",maxlength:"50",autocomplete:"off",disabled:t.isDoingWork},domProps:{value:t.versionData.version},on:{input:[function(a){a.target.composing||t.$set(t.versionData,"version",a.target.value)},function(a){t.$v.$touch()}]}}),e("p",{staticClass:"text-muted text-right m-b-0"},[t._v(t._s(50-t.versionData.version.length))]),e("label",[t._v("Description")]),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.versionData.changeText,expression:"versionData.changeText"}],staticClass:"form-control",staticStyle:{height:"250px"},attrs:{maxlength:"4000",autocomplete:"off",disabled:t.isDoingWork},domProps:{value:t.versionData.changeText},on:{input:[function(a){a.target.composing||t.$set(t.versionData,"changeText",a.target.value)},function(a){t.$v.$touch()}]}}),e("div",{staticClass:"row"},[t._m(0),e("div",{staticClass:"col-3"},[e("p",{staticClass:"text-muted text-right m-b-0"},[t._v(t._s(4e3-t.versionData.changeText.length))])])])]),e("div",{staticClass:"list-group col-md-6 m-b px-3"},[e("h4",{staticClass:"mb-4 mt-md-4"},[t._v("Options")]),e("div",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[t._m(1),e("div",{staticClass:"col-auto p-0"},[e("SwitchCheckbox",{class:{disabled:t.isDoingWork},attrs:{checkboxName:"visible"},on:{input:function(a){t.$v.$touch()}},model:{value:t.packageData.visible,callback:function(a){t.$set(t.packageData,"visible",a)},expression:"packageData.visible"}})],1)]),e("div",{staticClass:"row mt-4"},[e("div",{staticClass:"col-6 mt-4 mt-md-0"},[e("h4",{staticClass:"mb-4"},[t._v("Package File")]),e("PackageFileSelector",{class:{disabled:t.isDoingWork},on:{input:function(a){t.$v.$touch()}},model:{value:t.selectedPackageFile,callback:function(a){t.selectedPackageFile=a},expression:"selectedPackageFile"}})],1)])])])])],1):t._e()])])])},i=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-9"},[e("p",{staticClass:"text-muted text-left m-b-0"},[t._v("Descriptions support HTML")])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"col-auto p-0"},[e("p",{staticClass:"m-0"},[t._v("Version is visible")])])}],n=(e("a481"),e("96cf"),e("1da1")),o=(e("cadf"),e("551c"),e("097d"),e("216c")),r=e("ef61"),c=e("f051"),l=e("a1ef"),d=e("b5ae"),u={name:"versionAdd",components:{Nav:o["a"],PackageFileSelector:r["a"],SwitchCheckbox:c["a"]},data:function(){return{packageData:null,versionData:{version:"",changeText:"",visible:!0},selectedPackageFile:null,isDoingWork:!1}},validations:{versionData:{version:{required:d["required"]},changeText:{required:d["required"]}},selectedPackageFile:{required:d["required"]}},created:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isDoingWork=!0,t.next=3,l["d"].getPackage(this.$route.params.packageId);case 3:a=t.sent,200==a.status?(this.packageData=a.data,this.isDoingWork=!1):(this.isDoingWork=!1,this.packageData={status:a.status});case 5:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}(),mounted:function(){window.scrollTo(0,0)},methods:{selectPackage:function(t){this.$v.$touch(),this.selectedPackageFile=t.target.files[0]},cancel:function(){var t=this,a=this;bootbox.confirm({title:"Canel?",message:"Are you sure you want to cancel? All unsaved progress will be lost.",buttons:{confirm:{label:"OK",className:"btn-danger"},cancel:{label:"Cancel",className:"btn-secondary"}},callback:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(s){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:s&&a.$router.replace("/packages/".concat(t.$route.params.packageId));case 1:case"end":return e.stop()}},e,this)}));function s(t){return e.apply(this,arguments)}return s}()})},saveVersion:function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(){var a,e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isDoingWork=!0,t.next=3,l["d"].addVersion(this.$route.params.packageId,this.versionData);case 3:if(a=t.sent,200!=a.status){t.next=12;break}return t.next=7,l["d"].uploadPackageFile(this.$route.params.packageId,a.data.id,this.selectedPackageFile);case 7:e=t.sent,200!=e.status&&bootbox.alert("There was an error uploading the package file.<br>You need to manually upload the package file again through the Version manager.<br><br>".concat(e.data.message)),this.$router.replace("/packages/".concat(this.$route.params.packageId,"/versions/").concat(a.data.id)),t.next=14;break;case 12:this.isDoingWork=!1,bootbox.alert("There was an error creating the version.<br><br>".concat(a.data.message));case 14:case"end":return t.stop()}},t,this)}));function a(){return t.apply(this,arguments)}return a}()}},v=u,p=e("2877"),g=Object(p["a"])(v,s,i,!1,null,null,null);g.options.__file="VersionAdd.vue";a["default"]=g.exports}}]);
//# sourceMappingURL=versionAdd.89bc41bd.js.map