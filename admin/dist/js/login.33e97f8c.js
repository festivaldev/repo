(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["login"],{"7d81":function(t,e,s){"use strict";var a=s("975c"),r=s.n(a);r.a},"975c":function(t,e,s){},a55b:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("vue-headful",{attrs:{title:"Login â€“ FESTIVAL Pack'd"}}),s("div",{staticClass:"container"},[s("div",{staticClass:"row justify-content-around"},[s("div",{staticClass:"col-md-4"},[t._m(0),s("hr"),s("form",{attrs:{name:"loginForm",novalidate:""}},[s("div",{staticClass:"form-group"},[s("label",[t._v("Username or E-Mail")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",class:{invalid:t.authData&&404==t.authData.status},attrs:{type:"text",placeholder:"John Appleseed"},domProps:{value:t.user.username},on:{input:[function(e){e.target.composing||t.$set(t.user,"username",e.target.value)},function(e){t.$v.user.username.$touch()}],keyup:t.keyUp}}),t.authData&&404==t.authData.status?s("span",{staticClass:"text-danger"},[t._v(t._s(t.authData.message))]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"login-password"}},[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",class:{invalid:t.authData&&401==t.authData.status},attrs:{type:"password",placeholder:"Required"},domProps:{value:t.user.password},on:{input:[function(e){e.target.composing||t.$set(t.user,"password",e.target.value)},function(e){t.$v.user.password.$touch()}],keyup:t.keyUp}}),t.authData&&401==t.authData.status?s("span",{staticClass:"text-danger"},[t._v(t._s(t.authData.message))]):t._e()])]),s("div",{staticClass:"row mt-3 d-none d-md-flex"},[s("div",{staticClass:"col col-auto"},[s("button",{staticClass:"btn btn-primary",attrs:{disabled:t.$v.user.$invalid||t.isWorking},on:{click:function(e){t.login()}}},[t._v("Sign In")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isWorking,expression:"!isWorking"}],staticClass:"col text-right"},[s("router-link",{staticClass:"btn btn-link mt-2 p-0",attrs:{tag:"button",to:"/register"}},[t._v("Don't have an account yet?")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isWorking,expression:"isWorking"}],staticClass:"col text-right"},[s("div",{staticClass:"loading-indicator"})])]),s("div",{staticClass:"row mt-3 d-md-none"},[s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isWorking,expression:"!isWorking"}],staticClass:"col col-12"},[s("button",{staticClass:"btn btn-block btn-primary",attrs:{disabled:t.$v.user.$invalid||t.isWorking},on:{click:function(e){t.login()}}},[t._v("Sign In")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isWorking,expression:"!isWorking"}],staticClass:"col col-12 mt-3 text-center"},[s("router-link",{staticClass:"btn btn-link mt-2 p-0",attrs:{tag:"button",to:"/register"}},[t._v("Don't have an account yet?")])],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isWorking,expression:"isWorking"}],staticClass:"col col-12 text-center"},[s("div",{staticClass:"loading-indicator"})])])])])])],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("nav",[s("div",{staticClass:"nav-logo pb-0"},[s("div",{staticClass:"nav-link"},[s("img",{attrs:{src:"img/packr-icon.svg"}}),s("span",{staticClass:"ml-2"},[t._v("FESTIVAL Pack'd")])])])])}],i=(s("6b54"),s("a481"),s("96cf"),s("1da1")),n=(s("cadf"),s("551c"),s("097d"),s("0934")),o=s.n(n),u=s("a1ef"),c=s("b5ae"),l={name:"login",data:function(){return{user:{username:"",password:""},isWorking:!1,authData:null}},validations:{user:{username:{required:c["required"]},password:{required:c["required"]}}},created:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:this.$cookies.get("authToken")&&(this.$route.query.next?this.$router.replace(this.$route.query.next):this.$router.replace("/"));case 1:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){window.scrollTo(0,0)},methods:{keyUp:function(t){13!=t.keyCode||this.$v.user.$invalid||this.login()},login:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isWorking=!0,t.next=3,u["b"].login({username:this.user.username,password:o.a.SHA256(this.user.password).toString(o.a.enc.Hex)});case 3:e=t.sent,200==e.status?(this.$cookies.set("authToken",e.data["token"],function(){var t=new Date;return t.setHours(t.getHours()+2),t}()),this.$route.query.next?this.$router.replace(this.$route.query.next):this.$router.replace("/")):(this.authData={status:e.status,message:e.data.message},this.isWorking=!1,500==e.status&&bootbox.alert("There was an error signing you in:<br>".concat(e.data.message)));case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}},d=l,v=(s("7d81"),s("2877")),m=Object(v["a"])(d,a,r,!1,null,"02f4ce74",null);m.options.__file="Login.vue";e["default"]=m.exports}}]);
//# sourceMappingURL=login.33e97f8c.js.map