(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["packageAdd"],{"2f00":function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("vue-headful",{attrs:{title:"New Package â€“ FESTIVAL Pack'd"}}),t("div",{staticClass:"container"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[t("Nav")],1),t("div",{staticClass:"col-md-9"},[e._m(0),t("div",{staticClass:"row"},[t("div",{staticClass:"col-6 text-left"},[t("button",{staticClass:"btn btn-danger",attrs:{disabled:!e.$v.$anyDirty||e.isDoingWork},on:{click:function(a){e.cancel()}}},[t("span",{staticClass:"icon icon-squared-cross"}),e._v("\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t")])]),t("div",{staticClass:"col-6 row p-0 justify-content-end text-right"},[e.isDoingWork?t("div",{staticClass:"col p-0 pr-3"},[t("div",{staticClass:"loading-indicator"})]):e._e(),t("div",{staticClass:"col-auto p-0"},[t("button",{staticClass:"btn btn-primary",attrs:{disabled:e.$v.$invalid||!e.$v.$anyDirty||e.isDoingWork},on:{click:function(a){e.savePackage()}}},[t("span",{staticClass:"icon icon-save"}),e._v("\n\t\t\t\t\t\t\t\tSave\n\t\t\t\t\t\t\t")])])])]),t("form",{attrs:{name:"createPackageForm",novalidate:""}},[t("h4",{staticClass:"my-4"},[e._v("General Info")]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6 form-group"},[t("label",[e._v("Package Name")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.packageData.name,expression:"packageData.name"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Example Package",maxlength:"50",autocomplete:"off",disabled:e.isDoingWork},domProps:{value:e.packageData.name},on:{input:[function(a){a.target.composing||e.$set(e.packageData,"name",a.target.value)},function(a){e.$v.$touch()}]}}),t("p",{staticClass:"text-muted text-right m-b-0"},[e._v(e._s(50-e.packageData.name.length))])]),t("div",{staticClass:"col-md-6 form-group"},[t("label",[e._v("Bundle Identifier")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.packageData.identifier,expression:"packageData.identifier"}],staticClass:"form-control",attrs:{type:"text",placeholder:"com.example.package",maxlength:"50",autocomplete:"off",disabled:e.isDoingWork},domProps:{value:e.packageData.identifier},on:{input:[function(a){a.target.composing||e.$set(e.packageData,"identifier",a.target.value)},function(a){e.$v.$touch()}]}}),t("p",{staticClass:"text-muted text-right m-b-0"},[e._v(e._s(50-e.packageData.identifier.length))])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-6 form-group"},[t("label",{attrs:{for:"login-password"}},[e._v("Short Description")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.packageData.shortDescription,expression:"packageData.shortDescription"}],staticClass:"form-control",staticStyle:{height:"100px"},attrs:{maxlength:"255",autocomplete:"off",disabled:e.isDoingWork},domProps:{value:e.packageData.shortDescription},on:{input:[function(a){a.target.composing||e.$set(e.packageData,"shortDescription",a.target.value)},function(a){e.$v.$touch()}]}}),t("p",{staticClass:"text-muted text-right m-b-0"},[e._v(e._s(255-e.packageData.shortDescription.length))]),t("label",[e._v("Description")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.packageData.detailedDescription,expression:"packageData.detailedDescription"}],staticClass:"form-control",staticStyle:{height:"250px"},attrs:{maxlength:"4000",autocomplete:"off",disabled:e.isDoingWork},domProps:{value:e.packageData.detailedDescription},on:{input:[function(a){a.target.composing||e.$set(e.packageData,"detailedDescription",a.target.value)},function(a){e.$v.$touch()}]}}),t("div",{staticClass:"row"},[e._m(1),t("div",{staticClass:"col-3"},[t("p",{staticClass:"text-muted text-right m-b-0"},[e._v(e._s(4e3-e.packageData.detailedDescription.length))])])])]),t("div",{staticClass:"col-md-6 form-group"},[t("label",[e._v("Version")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.packageData.releaseVersion,expression:"packageData.releaseVersion"}],staticClass:"form-control mb-4",attrs:{type:"text",value:"1.0",maxlength:"30",autocomplete:"off",disabled:e.isDoingWork},domProps:{value:e.packageData.releaseVersion},on:{input:[function(a){a.target.composing||e.$set(e.packageData,"releaseVersion",a.target.value)},function(a){e.$v.$touch()}]}}),t("label",[e._v("Release Description (optional)")]),t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.packageData.releaseDescription,expression:"packageData.releaseDescription"}],staticClass:"form-control mb-4",staticStyle:{height:"100px"},attrs:{autocomplete:"off",disabled:e.isDoingWork},domProps:{value:e.packageData.releaseDescription},on:{input:[function(a){a.target.composing||e.$set(e.packageData,"releaseDescription",a.target.value)},function(a){e.$v.$touch()}]}}),t("label",[e._v("Support URL")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.packageData.bugsReportURL,expression:"packageData.bugsReportURL"}],staticClass:"form-control mb-4",attrs:{type:"text",placeholder:"http://example.com (optional)",autocomplete:"off",disabled:e.isDoingWork},domProps:{value:e.packageData.bugsReportURL},on:{input:[function(a){a.target.composing||e.$set(e.packageData,"bugsReportURL",a.target.value)},function(a){e.$v.$touch()}]}}),t("div",{staticClass:"row"},[t("div",{staticClass:"col-6"},[t("label",[e._v("Minimum OS")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.packageData.minOSVersion,expression:"packageData.minOSVersion"}],staticClass:"form-control",attrs:{type:"text",placeholder:"11.0",maxlength:"30",autocomplete:"off",disabled:e.isDoingWork},domProps:{value:e.packageData.minOSVersion},on:{input:[function(a){a.target.composing||e.$set(e.packageData,"minOSVersion",a.target.value)},function(a){e.$v.$touch()}]}})]),t("div",{staticClass:"col-6"},[t("label",[e._v("Maximum OS")]),t("input",{directives:[{name:"model",rawName:"v-model",value:e.packageData.maxOSVersion,expression:"packageData.maxOSVersion"}],staticClass:"form-control",attrs:{type:"text",placeholder:"11.3.1",maxlength:"30",autocomplete:"off",disabled:e.isDoingWork},domProps:{value:e.packageData.maxOSVersion},on:{input:[function(a){a.target.composing||e.$set(e.packageData,"maxOSVersion",a.target.value)},function(a){e.$v.$touch()}]}})])])])]),t("div",{staticClass:"row"},[t("div",{staticClass:"col-6 col-md-3 mt-4 mt-md-0"},[t("h4",{staticClass:"mb-4"},[e._v("Store Icon")]),t("PackageIconSelector",{class:{disabled:e.isDoingWork},on:{input:function(a){e.$v.$touch()}},model:{value:e.selectedPackageIcon,callback:function(a){e.selectedPackageIcon=a},expression:"selectedPackageIcon"}})],1),t("div",{staticClass:"col-6 col-md-3 mt-4 mt-md-0"},[t("h4",{staticClass:"mb-4"},[e._v("Package File")]),t("PackageFileSelector",{class:{disabled:e.isDoingWork},on:{input:function(a){e.$v.$touch()}},model:{value:e.selectedPackageFile,callback:function(a){e.selectedPackageFile=a},expression:"selectedPackageFile"}})],1),t("div",{staticClass:"list-group col-md-6 mt-4 mt-md-0 m-b px-3"},[t("h4",{staticClass:"mb-4"},[e._v("Options")]),t("div",{staticClass:"list-group-item d-flex justify-content-between align-items-center"},[e._m(2),t("div",{staticClass:"col-auto p-0"},[t("SwitchCheckbox",{class:{disabled:e.isDoingWork},attrs:{checkboxName:"visible"},on:{input:function(a){e.$v.$touch()}},model:{value:e.packageData.visible,callback:function(a){e.$set(e.packageData,"visible",a)},expression:"packageData.visible"}})],1)])])])])])])])],1)},s=[function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"dashhead mb-3"},[t("div",{staticClass:"dashhead-titles"},[t("h6",{staticClass:"dashhead-subtitle"},[e._v("Packages")]),t("h2",{staticClass:"dashhead-title"},[e._v("New Package")])])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"col-9"},[t("p",{staticClass:"text-muted text-left m-b-0"},[e._v("Descriptions support HTML")])])},function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"col-auto p-0"},[t("p",{staticClass:"m-0"},[e._v("Release this package automatically")])])}],o=(t("a481"),t("96cf"),t("1da1")),c=(t("cadf"),t("551c"),t("097d"),t("216c")),n=t("ef61"),r=t("5e5d"),l=t("f051"),d=t("a1ef"),u=t("b5ae"),p={name:"packageAdd",components:{Nav:c["a"],PackageFileSelector:n["a"],PackageIconSelector:r["a"],SwitchCheckbox:l["a"]},data:function(){return{packageData:{name:"",identifier:"",shortDescription:"",detailedDescription:"",releaseVersion:"1.0",releaseDescription:"Initial Release",bugsReportURL:null,minOSVersion:null,maxOSVersion:null,visible:!0},selectedPackageIcon:null,selectedPackageFile:null,isDoingWork:!1}},validations:{packageData:{name:{required:u["required"]},identifier:{required:u["required"]},shortDescription:{required:u["required"]},detailedDescription:{required:u["required"]},releaseVersion:{required:u["required"]},releaseDescription:{required:u["required"]},minOSVersion:{required:u["required"]}},selectedPackageFile:{required:u["required"]}},mounted:function(){window.scrollTo(0,0)},methods:{selectIcon:function(e){this.$v.$touch(),this.selectedPackageIcon=e.target.files[0];var a=this.$refs.iconPreview,t=new FileReader;t.onload=function(e){var t=window.URL.createObjectURL(BlobUtil.arrayBufferToBlob(e.target.result));a.style.backgroundImage="url(".concat(t,")")},t.readAsArrayBuffer(e.target.files[0])},selectPackage:function(e){this.$v.$touch(),this.selectedPackageFile=e.target.files[0]},clearIcon:function(){this.$v.$touch(),this.selectedPackageIcon=null,this.$refs.iconSelector.value=null,this.$refs.iconPreview.style.backgroundImage=null},cancel:function(){var e=this;bootbox.confirm({title:"Canel?",message:"Are you sure you want to cancel? All unsaved progress will be lost.",buttons:{confirm:{label:"OK",className:"btn-danger"},cancel:{label:"Cancel",className:"btn-secondary"}},callback:function(){var a=Object(o["a"])(regeneratorRuntime.mark(function a(t){return regeneratorRuntime.wrap(function(a){while(1)switch(a.prev=a.next){case 0:t&&e.$router.replace("/packages/");case 1:case"end":return a.stop()}},a,this)}));function t(e){return a.apply(this,arguments)}return t}()})},savePackage:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var a,t,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isDoingWork=!0,e.next=3,d["d"].addPackage(this.packageData);case 3:if(a=e.sent,200!=a.status){e.next=18;break}if(!this.selectedPackageIcon){e.next=10;break}return e.next=8,d["d"].uploadPackageIcon(a.data["package"].id,this.selectedPackageIcon);case 8:t=e.sent,200!=t.status&&bootbox.alert("There was an error uploading the package icon.<br>You need to manually upload the package icon again through the Package editor.<br><br>".concat(t.data.message));case 10:return e.next=12,d["d"].uploadPackageFile(a.data["package"].id,a.data["version"].id,this.selectedPackageFile);case 12:i=e.sent,200!=i.status&&bootbox.alert("There was an error uploading the package file.<br>You need to manually upload the package file again through the Version manager.<br><br>".concat(i.data.message)),this.isDoingWork=!1,this.$router.replace("/packages/".concat(a.data["package"].identifier)),e.next=20;break;case 18:this.isDoingWork=!1,bootbox.alert("There was an error creating the package.<br><br>".concat(a.data.message));case 20:case"end":return e.stop()}},e,this)}));function a(){return e.apply(this,arguments)}return a}()}},g=p,m=(t("8bdc"),t("2877")),v=Object(m["a"])(g,i,s,!1,null,"3ada9ef6",null);v.options.__file="PackageAdd.vue";a["default"]=v.exports},3851:function(e,a,t){"use strict";var i=t("cae5"),s=t.n(i);s.a},"5e5d":function(e,a,t){"use strict";var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"file-drop-zone text-center",on:{dragenter:e.dropIn,dragover:e.dropIn,dragleave:e.dropOut,drop:e.dropFile}},[t("div",{directives:[{name:"show",rawName:"v-show",value:!e.existingPackageIcon&&!e.selectedPackageIcon,expression:"!existingPackageIcon && !selectedPackageIcon"}],staticClass:"drop-zone-file-select",on:{click:e.openFileSelector}},[t("span",{staticClass:"select-file-text"},[t("label",{attrs:{for:"select-package"}},[e._v("Select File")]),t("label",[e._v("(.png)")]),t("input",{ref:"fileSelector",attrs:{type:"file",accept:"image/png"},on:{change:e.fileSelected}})])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.existingPackageIcon||e.selectedPackageIcon,expression:"existingPackageIcon || selectedPackageIcon"}],ref:"iconPreview",staticClass:"icon-preview",style:{"background-image":e.selectedIconBlob?"url("+e.selectedIconBlob+")":"url(/resources/icons/"+e.existingPackageIcon+")"},on:{click:e.clearPackageIcon}})])},s=[],o=(t("6762"),t("2fdb"),t("cadf"),t("551c"),t("097d"),t("b562")),c={name:"PackageIconSelector",props:["value","packageIcon"],data:function(){return{selectedPackageIcon:this.$props.value,selectedIconBlob:null,existingPackageIcon:null!==this.$props.packageIcon?this.$props.packageIcon:null}},methods:{dropIn:function(e){e.preventDefault(),e.stopPropagation(),e.target.classList.add("drop-in")},dropOut:function(e){e.preventDefault(),e.stopPropagation(),e.target.classList.remove("drop-in")},dropFile:function(e){e.preventDefault(),e.stopPropagation(),e.target.classList.remove("drop-in");var a=e.dataTransfer.files[0];["image/png"].includes(a.type)&&this.handleFile(a)},openFileSelector:function(){this.$refs["fileSelector"].click()},clearPackageIcon:function(){this.existingPackageIcon=null,this.selectedPackageIcon=null,this.$emit("input",this.selectedPackageIcon)},fileSelected:function(e){var a=e.target.files[0];this.handleFile(a)},handleFile:function(e){var a=this;this.selectedPackageIcon=e,this.$emit("input",this.selectedPackageIcon);var t=this.$refs.iconPreview,i=new FileReader;i.onload=function(e){var i=window.URL.createObjectURL(o["a"](e.target.result));a.selectedIconBlob=i,t.style.backgroundImage="url(".concat(i,")")},i.readAsArrayBuffer(e)}}},n=c,r=(t("3851"),t("2877")),l=Object(r["a"])(n,i,s,!1,null,"3eb526cb",null);l.options.__file="PackageIconSelector.vue";a["a"]=l.exports},"8bdc":function(e,a,t){"use strict";var i=t("a07d"),s=t.n(i);s.a},a07d:function(e,a,t){},b562:function(e,a,t){"use strict";function i(e,a){e=e||[],a=a||{},"string"===typeof a&&(a={type:a});try{return new Blob(e,a)}catch(o){if("TypeError"!==o.name)throw o;for(var t="undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,i=new t,s=0;s<e.length;s+=1)i.append(e[s]);return i.getBlob(a.type)}}function s(e,a){return i([e],a)}t.d(a,"a",function(){return s})},cae5:function(e,a,t){}}]);
//# sourceMappingURL=packageAdd.f45a8de8.js.map